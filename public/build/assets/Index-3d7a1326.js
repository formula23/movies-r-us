import{o as b,e as S,r as F,n as q,p as P,M as H,d as T,k as Q,c as z,w as i,u as m,j as w,Q as X,N as M,y as Z,q as J,b as a,F as O,Z as K,a as t,g as u,f as U,h as ee,t as x}from"./app-296b5acc.js";import{_ as te}from"./AppLayout-1ca8043d.js";import{_ as re}from"./Pagination-e311df34.js";import{h as se}from"./moment-fbc5633a.js";import{_ as oe}from"./TextInput-a4cf8e74.js";import"./_plugin-vue_export-helper-c27b6911.js";const ne=["type"],ae={__name:"GenericButton",props:{type:{type:String,default:"submit"},classes:{type:String,default:""}},setup(e){return(r,c)=>(b(),S("button",{type:e.type,class:q(e.classes)},[F(r.$slots,"default")],10,ne))}};var ie="Expected a function",V=0/0,ce="[object Symbol]",le=/^\s+|\s+$/g,de=/^[-+]0x[0-9a-f]+$/i,ue=/^0b[01]+$/i,fe=/^0o[0-7]+$/i,pe=parseInt,me=typeof P=="object"&&P&&P.Object===Object&&P,he=typeof self=="object"&&self&&self.Object===Object&&self,_e=me||he||Function("return this")(),ge=Object.prototype,xe=ge.toString,ye=Math.max,be=Math.min,R=function(){return _e.Date.now()};function ve(e,r,c){var l,f,g,h,d,s,p=0,n=!1,v=!1,$=!0;if(typeof e!="function")throw new TypeError(ie);r=D(r)||0,E(c)&&(n=!!c.leading,v="maxWait"in c,g=v?ye(D(c.maxWait)||0,r):g,$="trailing"in c?!!c.trailing:$);function C(o){var _=l,k=f;return l=f=void 0,p=o,h=e.apply(k,_),h}function A(o){return p=o,d=setTimeout(j,r),n?C(o):h}function Y(o){var _=o-s,k=o-p,N=r-_;return v?be(N,g-k):N}function L(o){var _=o-s,k=o-p;return s===void 0||_>=r||_<0||v&&k>=g}function j(){var o=R();if(L(o))return B(o);d=setTimeout(j,Y(o))}function B(o){return d=void 0,$&&l?C(o):(l=f=void 0,h)}function G(){d!==void 0&&clearTimeout(d),p=0,l=s=f=d=void 0}function W(){return d===void 0?h:B(R())}function I(){var o=R(),_=L(o);if(l=arguments,f=this,s=o,_){if(d===void 0)return A(s);if(v)return d=setTimeout(j,r),C(s)}return d===void 0&&(d=setTimeout(j,r)),h}return I.cancel=G,I.flush=W,I}function E(e){var r=typeof e;return!!e&&(r=="object"||r=="function")}function we(e){return!!e&&typeof e=="object"}function ke(e){return typeof e=="symbol"||we(e)&&xe.call(e)==ce}function D(e){if(typeof e=="number")return e;if(ke(e))return V;if(E(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=E(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=e.replace(le,"");var c=ue.test(e);return c||fe.test(e)?pe(e.slice(2),c?2:8):de.test(e)?V:+e}var Se=ve;const je=H(Se),y={__name:"SortColumnLink",props:{route_name:String,sort:String},setup(e){const r=e,c=T(new URLSearchParams(new URL(window.location).search)),l=Q(()=>c.value.get("sort")==r.sort&&c.value.get("direction")=="desc"?"asc":"desc");return(f,g)=>(b(),z(m(w),{href:f.route(r.route_name,{sort:e.sort,direction:l.value})},{default:i(()=>[F(f.$slots,"default")]),_:3},8,["href"]))}},Pe=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Movies ",-1),Te={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},$e={class:"flex justify-between"},Ce={class:"flex items-center w-1/2 sm:w-1/4 mb-4 space-x-2"},Ie={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},Me={class:"relative overflow-x-auto rounded-lg"},Oe={class:"w-full text-sm text-left text-gray-500"},Re={class:"text-xs text-gray-700 dark:text-gray-100 uppercase bg-gray-50/50 dark:bg-zinc-700/50"},Ee={scope:"col",class:"px-6 py-3"},Le={scope:"col",class:"px-6 py-3"},Be={scope:"col",class:"px-6 py-3"},Ne={scope:"col",class:"px-6 py-3 text-center"},Ue={scope:"col",class:"px-6 py-3 text-center"},Ve={scope:"col",class:"px-6 py-3"},De={scope:"col",class:"px-6 py-3"},Fe=t("th",{scope:"col",class:"px-6 py-3"}," Action ",-1),ze={scope:"row",class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"},Ae={scope:"row",class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"},Ye={class:"px-6 py-4"},Ge={class:"px-6 py-4 text-center"},We={class:"inline-block bg-indigo-400 text-white text-xs px-2 font-bold rounded-full"},qe={class:"px-6 py-4 text-center"},He={class:"inline-block bg-indigo-400 text-white text-xs px-2 font-bold rounded-full"},Qe={class:"px-6 py-4"},Xe={class:"px-6 py-4"},Ze={class:"px-6 py-4 space-x-2"},ot={__name:"Index",props:{movies:Object,perPage:Number},setup(e){X();const r=e,c=T(new URLSearchParams(new URL(window.location).search)),l=T(c.value.get("search")??"");let f=T(r.perPage);const g=s=>{confirm("Are you sure you want to delete this movie?")&&M.delete(route("movies.destroy",s),{errorBag:"destroyMovie",preserveScroll:!0,onError:p=>{console.log(p)}})},h=s=>{f=parseInt(s),M.get(route("movies.index"),{perPage:s},{only:["movies"],preserveState:!0,replace:!1})},d=je(s=>{M.get(route("movies.index"),{search:l.value??null},{only:["movies"],preserveState:!0,replace:!0})},300);return Z(l,()=>{d()}),J(()=>{}),(s,p)=>(b(),S(O,null,[a(m(K),{title:"Movies"}),a(te,{title:"Movies"},{header:i(()=>[Pe]),default:i(()=>[t("div",Te,[t("div",$e,[t("div",Ce,[a(oe,{modelValue:l.value,"onUpdate:modelValue":p[0]||(p[0]=n=>l.value=n),placeholder:"Search...",class:"w-full"},null,8,["modelValue"]),l.value?(b(),z(m(w),{key:0,href:s.route("movies.index"),class:"text-sm"},{default:i(()=>[u("Reset")]),_:1},8,["href"])):U("",!0)]),a(m(w),{href:s.route("movies.create"),class:"inline-flex items-center px-4 py-2 mb-4 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 focus:bg-gray-700 active:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"},{default:i(()=>[u(" Create Movie ")]),_:1},8,["href"])]),t("div",Ie,[t("div",Me,[t("table",Oe,[t("thead",Re,[t("tr",null,[t("th",Ee,[a(y,{sort:"release_year",route_name:"movies.index"},{default:i(()=>[u("Release Year")]),_:1})]),t("th",Le,[a(y,{sort:"title",route_name:"movies.index"},{default:i(()=>[u("Title")]),_:1})]),t("th",Be,[a(y,{sort:"genre",route_name:"movies.index"},{default:i(()=>[u("Genre")]),_:1})]),t("th",Ne,[a(y,{sort:"reviews_avg_rating",route_name:"movies.index"},{default:i(()=>[u("Rating")]),_:1})]),t("th",Ue,[a(y,{sort:"reviews_count",route_name:"movies.index"},{default:i(()=>[u("Reviews")]),_:1})]),t("th",Ve,[a(y,{sort:"release_date",route_name:"movies.index"},{default:i(()=>[u("Release Date")]),_:1})]),t("th",De,[a(y,{sort:"user_name",route_name:"movies.index"},{default:i(()=>[u("Created By")]),_:1})]),Fe])]),t("tbody",null,[(b(!0),S(O,null,ee(e.movies.data,n=>(b(),S("tr",{key:n.id,class:"bg-white border-b border-gray-100 hover:bg-gray-50/50 dark:bg-zinc-700 dark:hover:bg-zinc-700/50 dark:border-zinc-600"},[t("th",ze,x(n.release_year),1),t("th",Ae,[a(m(w),{href:s.route("movies.reviews.index",n),class:"hover:underline"},{default:i(()=>[u(x(n.title),1)]),_:2},1032,["href"])]),t("td",Ye,x(n.genre),1),t("td",Ge,[t("span",We,x(n.avg_rating),1)]),t("td",qe,[a(m(w),{href:s.route("movies.reviews.index",n)},{default:i(()=>[t("span",He,x(n.review_count),1)]),_:2},1032,["href"])]),t("td",Qe,x(m(se)(n.release_date).format("M/D/YYYY")),1),t("td",Xe,x(n.user.name),1),t("td",Ze,[n.user.id===s.$page.props.auth.user.id?(b(),S(O,{key:0},[a(m(w),{href:s.route("movies.edit",n),class:"font-medium text-blue-600 dark:text-blue-500 hover:underline"},{default:i(()=>[u("Edit")]),_:2},1032,["href"]),a(ae,{onClick:v=>g(n),type:"button",class:"font-medium text-red-600 dark:text-red-500 hover:underline"},{default:i(()=>[u(" Delete ")]),_:2},1032,["onClick"])],64)):U("",!0)])]))),128))])])])]),a(re,{onUpdatePerPage:h,showPerPageSelect:!0,perPage:m(f),dataset:e.movies,class:"mt-4 rounded-lg shadow-xl bg-white px-4"},null,8,["perPage","dataset"])])]),_:1})],64))}};export{ot as default};
