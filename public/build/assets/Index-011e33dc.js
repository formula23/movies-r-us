import{o as w,e as j,r as F,n as W,m as T,L as q,d as M,l as Z,A as Q,c as z,w as c,a as t,b as n,u as _,j as k,Q as X,M as C,v as J,F as V,Z as K,g as f,f as H,h as ee,t as v}from"./app-b0dc5b2b.js";import{_ as te}from"./AppLayout-6e970f0b.js";import{_ as se}from"./Pagination-5db7a9e1.js";import{h as re}from"./moment-fbc5633a.js";import{_ as oe}from"./TextInput-5c70b15f.js";import{_ as ne}from"./Checkbox-a351e1fd.js";import{_ as ae}from"./InputLabel-f6af2ead.js";import"./_plugin-vue_export-helper-c27b6911.js";const ie=["type"],ce={__name:"GenericButton",props:{type:{type:String,default:"submit"},classes:{type:String,default:""}},setup(e){return(s,i)=>(w(),j("button",{type:e.type,class:W(e.classes)},[F(s.$slots,"default")],10,ie))}};var le="Expected a function",N=0/0,de="[object Symbol]",ue=/^\s+|\s+$/g,fe=/^[-+]0x[0-9a-f]+$/i,me=/^0b[01]+$/i,pe=/^0o[0-7]+$/i,_e=parseInt,he=typeof T=="object"&&T&&T.Object===Object&&T,ge=typeof self=="object"&&self&&self.Object===Object&&self,xe=he||ge||Function("return this")(),ye=Object.prototype,ve=ye.toString,be=Math.max,we=Math.min,I=function(){return xe.Date.now()};function ke(e,s,i){var l,m,g,p,u,h,y=0,a=!1,d=!1,r=!0;if(typeof e!="function")throw new TypeError(le);s=U(s)||0,O(i)&&(a=!!i.leading,d="maxWait"in i,g=d?be(U(i.maxWait)||0,s):g,r="trailing"in i?!!i.trailing:r);function P(o){var x=l,S=m;return l=m=void 0,y=o,p=e.apply(S,x),p}function A(o){return y=o,u=setTimeout($,s),a?P(o):p}function D(o){var x=o-h,S=o-y,E=s-x;return d?we(E,g-S):E}function R(o){var x=o-h,S=o-y;return h===void 0||x>=s||x<0||d&&S>=g}function $(){var o=I();if(R(o))return B(o);u=setTimeout($,D(o))}function B(o){return u=void 0,r&&l?P(o):(l=m=void 0,p)}function Y(){u!==void 0&&clearTimeout(u),y=0,l=h=m=u=void 0}function G(){return u===void 0?p:B(I())}function L(){var o=I(),x=R(o);if(l=arguments,m=this,h=o,x){if(u===void 0)return A(h);if(d)return u=setTimeout($,s),P(h)}return u===void 0&&(u=setTimeout($,s)),p}return L.cancel=Y,L.flush=G,L}function O(e){var s=typeof e;return!!e&&(s=="object"||s=="function")}function Se(e){return!!e&&typeof e=="object"}function je(e){return typeof e=="symbol"||Se(e)&&ve.call(e)==de}function U(e){if(typeof e=="number")return e;if(je(e))return N;if(O(e)){var s=typeof e.valueOf=="function"?e.valueOf():e;e=O(s)?s+"":s}if(typeof e!="string")return e===0?e:+e;e=e.replace(ue,"");var i=me.test(e);return i||pe.test(e)?_e(e.slice(2),i?2:8):fe.test(e)?N:+e}var Me=ke;const Pe=q(Me);var $e="M18 21L14 17H17V7H14L18 3L22 7H19V17H22M2 19V17H12V19M2 13V11H9V13M2 7V5H6V7H2Z";const Te={class:""},b={__name:"SortColumnLink",props:{route_name:String,sort:String},setup(e){const s=e,i=M(new URLSearchParams(new URL(window.location).search)),l=Z(()=>i.value.get("sort")==s.sort&&i.value.get("direction")=="desc"?"asc":"desc");return(m,g)=>{const p=Q("svg-icon");return w(),z(_(k),{class:"flex justify-start space-x-2",href:m.route(s.route_name,{sort:e.sort,direction:l.value})},{default:c(()=>[t("div",Te,[F(m.$slots,"default")]),n(p,{class:"",type:"mdi",path:_($e),size:14},null,8,["path"])]),_:3},8,["href"])}}},Ce=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Movies ",-1),Le={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Ve={class:"flex justify-between"},Ie={class:"flex items-center w-1/2 sm:w-1/4 mb-4 space-x-2"},Oe={class:"whitespace-nowrap flex justify-end items-center space-x-2"},Re=t("div",{class:""},"Filter:",-1),Be={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},Ee={class:"relative overflow-x-auto rounded-lg"},He={class:"w-full text-sm text-left text-gray-500"},Ne={class:"text-xs text-gray-700 dark:text-gray-100 uppercase bg-gray-50/50 dark:bg-zinc-700/50"},Ue={scope:"col",class:"px-6 py-3"},Fe={scope:"col",class:"px-6 py-3"},ze={scope:"col",class:"px-6 py-3"},Ae={scope:"col",class:"px-6 py-3 text-center"},De={scope:"col",class:"px-6 py-3 text-center"},Ye={scope:"col",class:"px-6 py-3"},Ge={scope:"col",class:"px-6 py-3"},We=t("th",{scope:"col",class:"px-6 py-3"}," Action ",-1),qe={scope:"row",class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"},Ze={scope:"row",class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"},Qe={class:"px-6 py-4"},Xe={class:"px-6 py-4 text-center"},Je={class:"inline-block bg-indigo-400 text-white text-xs px-2 font-bold rounded-full"},Ke={class:"px-6 py-4 text-center"},et={class:"inline-block bg-indigo-400 text-white text-xs px-2 font-bold rounded-full"},tt={class:"px-6 py-4"},st={class:"px-6 py-4"},rt={class:"px-6 py-4 space-x-2 whitespace-nowrap"},ft={__name:"Index",props:{movies:Object,perPage:Number},setup(e){X();const s=e,i=M(new URLSearchParams(new URL(window.location).search)),l=M(i.value.get("search")??""),m=M(!!parseInt(i.value.get("my_movies")));let g=M(s.perPage);const p=a=>{confirm("Are you sure you want to delete this movie?")&&C.delete(route("movies.destroy",a),{errorBag:"destroyMovie",preserveScroll:!0,onError:d=>{console.log(d)}})},u=a=>{g=parseInt(a),C.get(route("movies.index"),{perPage:a},{only:["movies"],preserveState:!0,replace:!1})},h=Pe(a=>{C.get(route("movies.index"),{search:l.value??null},{only:["movies"],preserveState:!0,replace:!0})},300),y=a=>{const d=a?{my_movies:1}:{};C.get(route("movies.index"),d,{only:["movies"],preserveState:!0,replace:!0})};return J(l,()=>{h()}),(a,d)=>(w(),j(V,null,[n(_(K),{title:"Movies"}),n(te,{title:"Movies"},{header:c(()=>[Ce]),default:c(()=>[t("div",Le,[t("div",Ve,[t("div",Ie,[n(oe,{modelValue:l.value,"onUpdate:modelValue":d[0]||(d[0]=r=>l.value=r),placeholder:"Search...",class:"w-full"},null,8,["modelValue"]),l.value?(w(),z(_(k),{key:0,href:a.route("movies.index"),class:"text-sm"},{default:c(()=>[f("Reset")]),_:1},8,["href"])):H("",!0)]),t("div",Oe,[Re,n(ne,{onChange:d[1]||(d[1]=r=>y(r.target.checked)),checked:m.value,id:"my_movies"},null,8,["checked"]),n(ae,{for:"my_movies",value:"My Movies"})]),n(_(k),{href:a.route("movies.create"),class:"inline-flex items-center px-4 py-2 mb-4 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 focus:bg-gray-700 active:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"},{default:c(()=>[f(" Create Movie ")]),_:1},8,["href"])]),t("div",Be,[t("div",Ee,[t("table",He,[t("thead",Ne,[t("tr",null,[t("th",Ue,[n(b,{sort:"release_year",route_name:"movies.index"},{default:c(()=>[f("Release Year")]),_:1})]),t("th",Fe,[n(b,{sort:"title",route_name:"movies.index"},{default:c(()=>[f("Title")]),_:1})]),t("th",ze,[n(b,{sort:"genre",route_name:"movies.index"},{default:c(()=>[f("Genre")]),_:1})]),t("th",Ae,[n(b,{sort:"reviews_avg_rating",route_name:"movies.index"},{default:c(()=>[f("Rating")]),_:1})]),t("th",De,[n(b,{sort:"reviews_count",route_name:"movies.index"},{default:c(()=>[f("Reviews")]),_:1})]),t("th",Ye,[n(b,{sort:"release_date",route_name:"movies.index"},{default:c(()=>[f("Release Date")]),_:1})]),t("th",Ge,[n(b,{sort:"user_name",route_name:"movies.index"},{default:c(()=>[f("Created By")]),_:1})]),We])]),t("tbody",null,[(w(!0),j(V,null,ee(e.movies.data,r=>(w(),j("tr",{key:r.id,class:"bg-white border-b border-gray-100 hover:bg-gray-50/50 dark:bg-zinc-700 dark:hover:bg-zinc-700/50 dark:border-zinc-600"},[t("th",qe,v(r.release_year),1),t("th",Ze,[n(_(k),{href:a.route("movies.reviews.index",r),class:"hover:underline"},{default:c(()=>[f(v(r.title),1)]),_:2},1032,["href"])]),t("td",Qe,v(r.genre),1),t("td",Xe,[t("span",Je,v(r.avg_rating),1)]),t("td",Ke,[n(_(k),{href:a.route("movies.reviews.index",r)},{default:c(()=>[t("span",et,v(r.review_count),1)]),_:2},1032,["href"])]),t("td",tt,v(_(re)(r.release_date).format("M/D/YYYY")),1),t("td",st,v(r.user.name),1),t("td",rt,[r.user.id===a.$page.props.auth.user.id?(w(),j(V,{key:0},[n(_(k),{href:a.route("movies.edit",r),class:"font-medium text-blue-600 dark:text-blue-500 hover:underline"},{default:c(()=>[f("Edit")]),_:2},1032,["href"]),n(ce,{onClick:P=>p(r),type:"button",class:"font-medium text-red-600 dark:text-red-500 hover:underline"},{default:c(()=>[f(" Delete ")]),_:2},1032,["onClick"])],64)):H("",!0)])]))),128))])])])]),n(se,{onUpdatePerPage:u,showPerPageSelect:!0,perPage:_(g),dataset:e.movies,only:["movies"],class:"mt-4 rounded-lg shadow-xl bg-white px-4"},null,8,["perPage","dataset"])])]),_:1})],64))}};export{ft as default};
