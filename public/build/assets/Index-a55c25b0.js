import{o as v,e as S,r as z,n as W,p as P,M as q,d as M,k as Z,C as Q,c as D,w as i,a as t,b as a,u as h,j as w,Q as X,N as V,y as J,q as K,F as L,Z as ee,g as u,f as N,h as te,t as x}from"./app-003ba5e6.js";import{_ as se}from"./AppLayout-541f46fc.js";import{_ as re}from"./Pagination-f58da52f.js";import{h as oe}from"./moment-fbc5633a.js";import{_ as ne}from"./TextInput-b63fe986.js";import"./_plugin-vue_export-helper-c27b6911.js";const ae=["type"],ie={__name:"GenericButton",props:{type:{type:String,default:"submit"},classes:{type:String,default:""}},setup(e){return(s,c)=>(v(),S("button",{type:e.type,class:W(e.classes)},[z(s.$slots,"default")],10,ae))}};var ce="Expected a function",H=0/0,le="[object Symbol]",de=/^\s+|\s+$/g,ue=/^[-+]0x[0-9a-f]+$/i,fe=/^0b[01]+$/i,pe=/^0o[0-7]+$/i,me=parseInt,he=typeof P=="object"&&P&&P.Object===Object&&P,_e=typeof self=="object"&&self&&self.Object===Object&&self,ge=he||_e||Function("return this")(),xe=Object.prototype,ye=xe.toString,ve=Math.max,be=Math.min,I=function(){return ge.Date.now()};function we(e,s,c){var l,f,g,p,d,r,m=0,n=!1,b=!1,T=!0;if(typeof e!="function")throw new TypeError(ce);s=U(s)||0,O(c)&&(n=!!c.leading,b="maxWait"in c,g=b?ve(U(c.maxWait)||0,s):g,T="trailing"in c?!!c.trailing:T);function $(o){var _=l,k=f;return l=f=void 0,m=o,p=e.apply(k,_),p}function F(o){return m=o,d=setTimeout(j,s),n?$(o):p}function A(o){var _=o-r,k=o-m,B=s-_;return b?be(B,g-k):B}function R(o){var _=o-r,k=o-m;return r===void 0||_>=s||_<0||b&&k>=g}function j(){var o=I();if(R(o))return E(o);d=setTimeout(j,A(o))}function E(o){return d=void 0,T&&l?$(o):(l=f=void 0,p)}function Y(){d!==void 0&&clearTimeout(d),m=0,l=r=f=d=void 0}function G(){return d===void 0?p:E(I())}function C(){var o=I(),_=R(o);if(l=arguments,f=this,r=o,_){if(d===void 0)return F(r);if(b)return d=setTimeout(j,s),$(r)}return d===void 0&&(d=setTimeout(j,s)),p}return C.cancel=Y,C.flush=G,C}function O(e){var s=typeof e;return!!e&&(s=="object"||s=="function")}function ke(e){return!!e&&typeof e=="object"}function Se(e){return typeof e=="symbol"||ke(e)&&ye.call(e)==le}function U(e){if(typeof e=="number")return e;if(Se(e))return H;if(O(e)){var s=typeof e.valueOf=="function"?e.valueOf():e;e=O(s)?s+"":s}if(typeof e!="string")return e===0?e:+e;e=e.replace(de,"");var c=fe.test(e);return c||pe.test(e)?me(e.slice(2),c?2:8):ue.test(e)?H:+e}var je=we;const Pe=q(je);var Me="M18 21L14 17H17V7H14L18 3L22 7H19V17H22M2 19V17H12V19M2 13V11H9V13M2 7V5H6V7H2Z";const Te={class:""},y={__name:"SortColumnLink",props:{route_name:String,sort:String},setup(e){const s=e,c=M(new URLSearchParams(new URL(window.location).search)),l=Z(()=>c.value.get("sort")==s.sort&&c.value.get("direction")=="desc"?"asc":"desc");return(f,g)=>{const p=Q("svg-icon");return v(),D(h(w),{class:"flex justify-start space-x-2",href:f.route(s.route_name,{sort:e.sort,direction:l.value})},{default:i(()=>[t("div",Te,[z(f.$slots,"default")]),a(p,{class:"",type:"mdi",path:h(Me),size:14},null,8,["path"])]),_:3},8,["href"])}}},$e=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Movies ",-1),Ce={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Ve={class:"flex justify-between"},Le={class:"flex items-center w-1/2 sm:w-1/4 mb-4 space-x-2"},Ie={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},Oe={class:"relative overflow-x-auto rounded-lg"},Re={class:"w-full text-sm text-left text-gray-500"},Ee={class:"text-xs text-gray-700 dark:text-gray-100 uppercase bg-gray-50/50 dark:bg-zinc-700/50"},Be={scope:"col",class:"px-6 py-3"},Ne={scope:"col",class:"px-6 py-3"},He={scope:"col",class:"px-6 py-3"},Ue={scope:"col",class:"px-6 py-3 text-center"},ze={scope:"col",class:"px-6 py-3 text-center"},De={scope:"col",class:"px-6 py-3"},Fe={scope:"col",class:"px-6 py-3"},Ae=t("th",{scope:"col",class:"px-6 py-3"}," Action ",-1),Ye={scope:"row",class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"},Ge={scope:"row",class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"},We={class:"px-6 py-4"},qe={class:"px-6 py-4 text-center"},Ze={class:"inline-block bg-indigo-400 text-white text-xs px-2 font-bold rounded-full"},Qe={class:"px-6 py-4 text-center"},Xe={class:"inline-block bg-indigo-400 text-white text-xs px-2 font-bold rounded-full"},Je={class:"px-6 py-4"},Ke={class:"px-6 py-4"},et={class:"px-6 py-4 space-x-2 whitespace-nowrap"},it={__name:"Index",props:{movies:Object,perPage:Number},setup(e){X();const s=e,c=M(new URLSearchParams(new URL(window.location).search)),l=M(c.value.get("search")??"");let f=M(s.perPage);const g=r=>{confirm("Are you sure you want to delete this movie?")&&V.delete(route("movies.destroy",r),{errorBag:"destroyMovie",preserveScroll:!0,onError:m=>{console.log(m)}})},p=r=>{f=parseInt(r),V.get(route("movies.index"),{perPage:r},{only:["movies"],preserveState:!0,replace:!1})},d=Pe(r=>{V.get(route("movies.index"),{search:l.value??null},{only:["movies"],preserveState:!0,replace:!0})},300);return J(l,()=>{d()}),K(()=>{}),(r,m)=>(v(),S(L,null,[a(h(ee),{title:"Movies"}),a(se,{title:"Movies"},{header:i(()=>[$e]),default:i(()=>[t("div",Ce,[t("div",Ve,[t("div",Le,[a(ne,{modelValue:l.value,"onUpdate:modelValue":m[0]||(m[0]=n=>l.value=n),placeholder:"Search...",class:"w-full"},null,8,["modelValue"]),l.value?(v(),D(h(w),{key:0,href:r.route("movies.index"),class:"text-sm"},{default:i(()=>[u("Reset")]),_:1},8,["href"])):N("",!0)]),a(h(w),{href:r.route("movies.create"),class:"inline-flex items-center px-4 py-2 mb-4 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 focus:bg-gray-700 active:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"},{default:i(()=>[u(" Create Movie ")]),_:1},8,["href"])]),t("div",Ie,[t("div",Oe,[t("table",Re,[t("thead",Ee,[t("tr",null,[t("th",Be,[a(y,{sort:"release_year",route_name:"movies.index"},{default:i(()=>[u("Release Year")]),_:1})]),t("th",Ne,[a(y,{sort:"title",route_name:"movies.index"},{default:i(()=>[u("Title")]),_:1})]),t("th",He,[a(y,{sort:"genre",route_name:"movies.index"},{default:i(()=>[u("Genre")]),_:1})]),t("th",Ue,[a(y,{sort:"reviews_avg_rating",route_name:"movies.index"},{default:i(()=>[u("Rating")]),_:1})]),t("th",ze,[a(y,{sort:"reviews_count",route_name:"movies.index"},{default:i(()=>[u("Reviews")]),_:1})]),t("th",De,[a(y,{sort:"release_date",route_name:"movies.index"},{default:i(()=>[u("Release Date")]),_:1})]),t("th",Fe,[a(y,{sort:"user_name",route_name:"movies.index"},{default:i(()=>[u("Created By")]),_:1})]),Ae])]),t("tbody",null,[(v(!0),S(L,null,te(e.movies.data,n=>(v(),S("tr",{key:n.id,class:"bg-white border-b border-gray-100 hover:bg-gray-50/50 dark:bg-zinc-700 dark:hover:bg-zinc-700/50 dark:border-zinc-600"},[t("th",Ye,x(n.release_year),1),t("th",Ge,[a(h(w),{href:r.route("movies.reviews.index",n),class:"hover:underline"},{default:i(()=>[u(x(n.title),1)]),_:2},1032,["href"])]),t("td",We,x(n.genre),1),t("td",qe,[t("span",Ze,x(n.avg_rating),1)]),t("td",Qe,[a(h(w),{href:r.route("movies.reviews.index",n)},{default:i(()=>[t("span",Xe,x(n.review_count),1)]),_:2},1032,["href"])]),t("td",Je,x(h(oe)(n.release_date).format("M/D/YYYY")),1),t("td",Ke,x(n.user.name),1),t("td",et,[n.user.id===r.$page.props.auth.user.id?(v(),S(L,{key:0},[a(h(w),{href:r.route("movies.edit",n),class:"font-medium text-blue-600 dark:text-blue-500 hover:underline"},{default:i(()=>[u("Edit")]),_:2},1032,["href"]),a(ie,{onClick:b=>g(n),type:"button",class:"font-medium text-red-600 dark:text-red-500 hover:underline"},{default:i(()=>[u(" Delete ")]),_:2},1032,["onClick"])],64)):N("",!0)])]))),128))])])])]),a(re,{onUpdatePerPage:p,showPerPageSelect:!0,perPage:h(f),dataset:e.movies,class:"mt-4 rounded-lg shadow-xl bg-white px-4"},null,8,["perPage","dataset"])])]),_:1})],64))}};export{it as default};
