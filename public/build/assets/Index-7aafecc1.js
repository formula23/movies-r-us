import{o as w,e as M,r as F,n as W,m as T,L as q,d as j,l as Z,A as Q,c as z,w as c,a as t,b as n,u as _,j as k,Q as X,M as C,v as J,s as K,F as V,Z as ee,g as f,f as H,h as te,t as y}from"./app-3cf17716.js";import{_ as se}from"./AppLayout-aa44442a.js";import{_ as re}from"./Pagination-3a9964d9.js";import{h as oe}from"./moment-fbc5633a.js";import{_ as ne}from"./TextInput-15a00899.js";import{_ as ae}from"./Checkbox-f549a813.js";import{_ as ie}from"./InputLabel-c96c83c1.js";import"./_plugin-vue_export-helper-c27b6911.js";const ce=["type"],le={__name:"GenericButton",props:{type:{type:String,default:"submit"},classes:{type:String,default:""}},setup(e){return(s,i)=>(w(),M("button",{type:e.type,class:W(e.classes)},[F(s.$slots,"default")],10,ce))}};var de="Expected a function",N=0/0,ue="[object Symbol]",fe=/^\s+|\s+$/g,me=/^[-+]0x[0-9a-f]+$/i,pe=/^0b[01]+$/i,_e=/^0o[0-7]+$/i,he=parseInt,ge=typeof T=="object"&&T&&T.Object===Object&&T,xe=typeof self=="object"&&self&&self.Object===Object&&self,ve=ge||xe||Function("return this")(),ye=Object.prototype,be=ye.toString,we=Math.max,ke=Math.min,I=function(){return ve.Date.now()};function Se(e,s,i){var l,m,g,p,d,h,v=0,a=!1,u=!1,r=!0;if(typeof e!="function")throw new TypeError(de);s=U(s)||0,O(i)&&(a=!!i.leading,u="maxWait"in i,g=u?we(U(i.maxWait)||0,s):g,r="trailing"in i?!!i.trailing:r);function P(o){var x=l,S=m;return l=m=void 0,v=o,p=e.apply(S,x),p}function A(o){return v=o,d=setTimeout($,s),a?P(o):p}function D(o){var x=o-h,S=o-v,E=s-x;return u?ke(E,g-S):E}function R(o){var x=o-h,S=o-v;return h===void 0||x>=s||x<0||u&&S>=g}function $(){var o=I();if(R(o))return B(o);d=setTimeout($,D(o))}function B(o){return d=void 0,r&&l?P(o):(l=m=void 0,p)}function Y(){d!==void 0&&clearTimeout(d),v=0,l=h=m=d=void 0}function G(){return d===void 0?p:B(I())}function L(){var o=I(),x=R(o);if(l=arguments,m=this,h=o,x){if(d===void 0)return A(h);if(u)return d=setTimeout($,s),P(h)}return d===void 0&&(d=setTimeout($,s)),p}return L.cancel=Y,L.flush=G,L}function O(e){var s=typeof e;return!!e&&(s=="object"||s=="function")}function Me(e){return!!e&&typeof e=="object"}function je(e){return typeof e=="symbol"||Me(e)&&be.call(e)==ue}function U(e){if(typeof e=="number")return e;if(je(e))return N;if(O(e)){var s=typeof e.valueOf=="function"?e.valueOf():e;e=O(s)?s+"":s}if(typeof e!="string")return e===0?e:+e;e=e.replace(fe,"");var i=pe.test(e);return i||_e.test(e)?he(e.slice(2),i?2:8):me.test(e)?N:+e}var Pe=Se;const $e=q(Pe);var Te="M18 21L14 17H17V7H14L18 3L22 7H19V17H22M2 19V17H12V19M2 13V11H9V13M2 7V5H6V7H2Z";const Ce={class:""},b={__name:"SortColumnLink",props:{route_name:String,sort:String},setup(e){const s=e,i=j(new URLSearchParams(new URL(window.location).search)),l=Z(()=>i.value.get("sort")==s.sort&&i.value.get("direction")=="desc"?"asc":"desc");return(m,g)=>{const p=Q("svg-icon");return w(),z(_(k),{class:"flex justify-start space-x-2",href:m.route(s.route_name,{sort:e.sort,direction:l.value})},{default:c(()=>[t("div",Ce,[F(m.$slots,"default")]),n(p,{class:"",type:"mdi",path:_(Te),size:14},null,8,["path"])]),_:3},8,["href"])}}},Le=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Movies ",-1),Ve={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Ie={class:"flex justify-between"},Oe={class:"flex items-center w-1/2 sm:w-1/4 mb-4 space-x-2"},Re={class:"whitespace-nowrap flex justify-end items-center space-x-2"},Be=t("div",{class:""},"Filter:",-1),Ee={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},He={class:"relative overflow-x-auto rounded-lg"},Ne={class:"w-full text-sm text-left text-gray-500"},Ue={class:"text-xs text-gray-700 dark:text-gray-100 uppercase bg-gray-50/50 dark:bg-zinc-700/50"},Fe={scope:"col",class:"px-6 py-3"},ze={scope:"col",class:"px-6 py-3"},Ae={scope:"col",class:"px-6 py-3"},De={scope:"col",class:"px-6 py-3 text-center"},Ye={scope:"col",class:"px-6 py-3 text-center"},Ge={scope:"col",class:"px-6 py-3"},We={scope:"col",class:"px-6 py-3"},qe=t("th",{scope:"col",class:"px-6 py-3"}," Action ",-1),Ze={scope:"row",class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"},Qe={scope:"row",class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"},Xe={class:"px-6 py-4"},Je={class:"px-6 py-4 text-center"},Ke={class:"inline-block bg-indigo-400 text-white text-xs px-2 font-bold rounded-full"},et={class:"px-6 py-4 text-center"},tt={class:"inline-block bg-indigo-400 text-white text-xs px-2 font-bold rounded-full"},st={class:"px-6 py-4"},rt={class:"px-6 py-4"},ot={class:"px-6 py-4 space-x-2 whitespace-nowrap"},mt={__name:"Index",props:{movies:Object,perPage:Number},setup(e){X();const s=e,i=j(new URLSearchParams(new URL(window.location).search)),l=j(i.value.get("search")??""),m=j(!!parseInt(i.value.get("my_movies")));let g=j(s.perPage);const p=a=>{confirm("Are you sure you want to delete this movie?")&&C.delete(route("movies.destroy",a),{errorBag:"destroyMovie",preserveScroll:!0,onError:u=>{console.log(u)}})},d=a=>{g=parseInt(a),C.get(route("movies.index"),{perPage:a},{only:["movies"],preserveState:!0,replace:!1})},h=$e(a=>{C.get(route("movies.index"),{search:l.value??null},{only:["movies"],preserveState:!0,replace:!0})},300),v=a=>{C.get(route("movies.index"),{my_movies:a?1:0},{only:["movies"],preserveState:!0,replace:!0})};return J(l,()=>{h()}),K(()=>{console.log(m.value)}),(a,u)=>(w(),M(V,null,[n(_(ee),{title:"Movies"}),n(se,{title:"Movies"},{header:c(()=>[Le]),default:c(()=>[t("div",Ve,[t("div",Ie,[t("div",Oe,[n(ne,{modelValue:l.value,"onUpdate:modelValue":u[0]||(u[0]=r=>l.value=r),placeholder:"Search...",class:"w-full"},null,8,["modelValue"]),l.value?(w(),z(_(k),{key:0,href:a.route("movies.index"),class:"text-sm"},{default:c(()=>[f("Reset")]),_:1},8,["href"])):H("",!0)]),t("div",Re,[Be,n(ae,{onChange:u[1]||(u[1]=r=>v(r.target.checked)),checked:m.value,id:"my_movies"},null,8,["checked"]),n(ie,{for:"my_movies",value:"My Movies"})]),n(_(k),{href:a.route("movies.create"),class:"inline-flex items-center px-4 py-2 mb-4 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 focus:bg-gray-700 active:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"},{default:c(()=>[f(" Create Movie ")]),_:1},8,["href"])]),t("div",Ee,[t("div",He,[t("table",Ne,[t("thead",Ue,[t("tr",null,[t("th",Fe,[n(b,{sort:"release_year",route_name:"movies.index"},{default:c(()=>[f("Release Year")]),_:1})]),t("th",ze,[n(b,{sort:"title",route_name:"movies.index"},{default:c(()=>[f("Title")]),_:1})]),t("th",Ae,[n(b,{sort:"genre",route_name:"movies.index"},{default:c(()=>[f("Genre")]),_:1})]),t("th",De,[n(b,{sort:"reviews_avg_rating",route_name:"movies.index"},{default:c(()=>[f("Rating")]),_:1})]),t("th",Ye,[n(b,{sort:"reviews_count",route_name:"movies.index"},{default:c(()=>[f("Reviews")]),_:1})]),t("th",Ge,[n(b,{sort:"release_date",route_name:"movies.index"},{default:c(()=>[f("Release Date")]),_:1})]),t("th",We,[n(b,{sort:"user_name",route_name:"movies.index"},{default:c(()=>[f("Created By")]),_:1})]),qe])]),t("tbody",null,[(w(!0),M(V,null,te(e.movies.data,r=>(w(),M("tr",{key:r.id,class:"bg-white border-b border-gray-100 hover:bg-gray-50/50 dark:bg-zinc-700 dark:hover:bg-zinc-700/50 dark:border-zinc-600"},[t("th",Ze,y(r.release_year),1),t("th",Qe,[n(_(k),{href:a.route("movies.reviews.index",r),class:"hover:underline"},{default:c(()=>[f(y(r.title),1)]),_:2},1032,["href"])]),t("td",Xe,y(r.genre),1),t("td",Je,[t("span",Ke,y(r.avg_rating),1)]),t("td",et,[n(_(k),{href:a.route("movies.reviews.index",r)},{default:c(()=>[t("span",tt,y(r.review_count),1)]),_:2},1032,["href"])]),t("td",st,y(_(oe)(r.release_date).format("M/D/YYYY")),1),t("td",rt,y(r.user.name),1),t("td",ot,[r.user.id===a.$page.props.auth.user.id?(w(),M(V,{key:0},[n(_(k),{href:a.route("movies.edit",r),class:"font-medium text-blue-600 dark:text-blue-500 hover:underline"},{default:c(()=>[f("Edit")]),_:2},1032,["href"]),n(le,{onClick:P=>p(r),type:"button",class:"font-medium text-red-600 dark:text-red-500 hover:underline"},{default:c(()=>[f(" Delete ")]),_:2},1032,["onClick"])],64)):H("",!0)])]))),128))])])])]),n(re,{onUpdatePerPage:d,showPerPageSelect:!0,perPage:_(g),dataset:e.movies,class:"mt-4 rounded-lg shadow-xl bg-white px-4"},null,8,["perPage","dataset"])])]),_:1})],64))}};export{mt as default};
